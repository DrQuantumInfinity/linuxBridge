#include "TimerTick.h"

#include "timer.h"

/**************************************************************************
 *                                  Constants
 **************************************************************************/
/**************************************************************************
 *                                  Macros
 **************************************************************************/
/**************************************************************************
 *                                  Types
 **************************************************************************/
/**************************************************************************
 *                                  Prototypes
 **************************************************************************/
/**************************************************************************
 *                                  Variables
 **************************************************************************/
/**************************************************************************
 *                                  Global Functions
 **************************************************************************/
bool TimerTick::HasElapsed(void)
{
    bool hasElapsed = false;
    if (_ms)
    {
        hasElapsed = TimerHasElapsedMs(_ms);
    }
    return hasElapsed;
}
uint32_t TimerTick::GetRemaining(void)
{
    uint32_t ticksRemaining = 0xFFFFFFFF;
    if (_ms)
    {
        ticksRemaining = TimerRemainingMs(_ms);
    }
    return ticksRemaining;
}
void TimerTick::SetFromNow(uint32_t msFromNow)
{
    _ms = TimerGetMs() + msFromNow;
    if (_ms == 0)
    {
        _ms++;
    }
}
void TimerTick::Increment(uint32_t numMs)
{
    _ms += numMs;
    if (_ms == 0)
    {
        _ms++;
    }
    if (HasElapsed())
    {
        SetFromNow(numMs);
    }
}
void TimerTick::Disable(void)
{
    _ms = 0;
}
/**************************************************************************
 *                                  Private Functions
 **************************************************************************/
